# Hello 11ty!

Oh hi! Welcome to your new blog. ğŸ¡

[![Open in GitHub Codespaces](https://github.com/codespaces/badge.svg)](https://codespaces.new/glitchdotcom/11ty-to-compute)

**You can publish this site to Fastly for free!**

This project is a blog powered by [Eleventy](https://www.11ty.dev/), a lightweight static site generator that builds plain HTML files for quick loading by your visitors.

In this guide we'll show you how to deploy your blog to <a href="https://www.fastly.com/products/edge-compute" target="_blank">Fastly Compute</a> for super fast performance â€“ your great posts will immediately be available for everyone, everywhere all at once. ğŸª„

> You can alternatively deploy your blog to other platforms, like <a href="https://pages.github.com/" target="_blank">GitHub Pages</a>. 

## Remix your own blog

**Fork** your own copy of [this repo](https://github.com/glitchdotcom/11ty-to-compute), click **Code** > **Codespaces** and create a new Codespace to edit the project.

<img alt="Create codespace" src="https://github.com/user-attachments/assets/cb29a8da-d1ac-42f5-962c-7d43b8011324" width="400px"/>

Give the Codespace a minute or two to start up â€“ it'll automatically build and run your new website, opening a preview to see your site update as you edit! 

![The blog in a Codespace](https://github.com/user-attachments/assets/a86b11ed-76d5-4f74-9918-617e164d5c73)

* When your website preview opens, click the **ğŸ” Split** button at the bottom so that you can see the site side by side with your code.
* _You can close [x] the **Terminal** while you work._

## Get to know your blog

You can make edits in the files by opening them from the left sidebar. Your blog preview will update as you edit!

The files you'll want to edit are mostly in the `source` and `assets` directories:

ğŸ“ Edit the post content and add new posts in `source/posts`.

ğŸ’¡ Change your site HTML in the `source/_layouts` files.

â„¹ï¸ Edit the metadata for your site in the `source/_data` folder.

ğŸ¨ Change your site style rules in `assets/style.css`.

ğŸ–¼ï¸ Add images in the `assets/` folder â€“ you'll find an example of adding an image to a post in `source/posts/fourth-post.md`.

> ğŸš¨âš ï¸ Danger zone: There are directories in the project that you might want to be careful with..
>
> * The `_site` folder is autogenerated by 11ty so best not to edit in there.
> * The `_app` folder is autogenerated by the Fastly tooling so you should only edit in there if you want to change the Compute app you deploy to the edge.
> * The `helpers` folder contains the bash scripts that run when your project starts and when you hit the **ğŸš€ Publish** button.

### Share your draft site 

Share your draft site with collaborators by opening **ğŸ’» Terminal** > **PORTS**.

Change `private` to `public` by right clicking your running port and choosing from the options.

![Change the port settings](https://github.com/user-attachments/assets/31802b6e-b766-4b5b-8b59-529d31fdf4ee)

Copy the URL to your clipboard and share it ğŸ“‹.

![Copy the URL](https://github.com/user-attachments/assets/a4704062-29e1-45b4-91e7-02599f001967)

## Deploy your blog to Fastly Compute

Ready to share your site with the world? Deploy it to Fastly to make it available for everyone everywhere all at once!

Grab a Fastly API key from your account and add it to your GitHub repo:

- Sign up for a <strong><a href="https://www.fastly.com/signup/" target="_blank">free Fastly developer account</a></strong>
- Grab an **API Token** from **Account** > **Personal Profile** > **API Tokens** > **Create Token**
  - _Type_: Automation
  - _Role_: Engineer
  - _Scope_: Global (deselect the _Read-only access_ box)
  - _Access_: All services
  - _Expiration_: Never expire
- **Copy the token value into your GitHub repo**
  - Open **Settings** > **Secrets and Variables** > **Codespaces**
  - Create a **New repository secret**
  - Enter the name `FASTLY_API_TOKEN`
  - Paste your token value in and save

Back in your Codespace, you should see a prompt to reload for the new environment variable so go ahead and click that.

Hit the **ğŸš€ Publish** button and watch the Terminal output for your new site address!

Open it in a new tab and tell everyone you know. ğŸ“£

ğŸ¢ Whenever you update your content, like adding a new blog post, hit the **ğŸš€ Publish** button again to go live!

## How this project works ğŸ§

This project uses the <a href="https://github.com/fastly/compute-js-static-publish" target="_blank">Fastly JavaScript Static Publisher</a> to turn your blog into a serverless application that runs at the network edge, near your users. 

* The 11ty framework builds your posts into the HTML and other files that make up your website, placing them in the `_site` folder.
* The Static Publisher uses those files to scaffold a Compute app that compiles into Webassembly (Wasm) that can run fast and securely on the Fastly network â€“ you'll find the Compute code in `_app` after you deploy.
* When you publish, the project deploys the app to Fastly, creating a service and uploading the Wasm to it.
* It then then publishes your content to a KV Store â€“ a key-value store that also runs on Fastly and that your app can talk to.

Your app only needs deployed to Fastly once, after that we just update the new content to your KV Store and your Compute app will pull your posts from there.

âš™ï¸ The settings we use to create the guided experience in Codespaces are in the `.devcontainer/` folder.

ğŸ§° You'll find the Fastly CLI commands we use under the hood in the `helpers/publish.sh` script.

## Extensions

This project uses the following extensions from the dev community! ğŸ™Œ

* [VSCode Action Buttons Ext](https://marketplace.visualstudio.com/items?itemName=jkearins.action-buttons-ext)
* [Prettier Code Formatter](https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode)
* [ESLint](https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint)

## Keep going! ğŸ›¸

**Don't stop there, <a href="https://www.fastly.com/documentation/solutions/tutorials/deliver-your-site/#sending-domain-traffic-to-fastly" target="_blank">add a domain to your new site</a>.**

Check out lots more tips on using the <a href="https://github.com/fastly/compute-js-static-publish" target="_blank">Static Publisher</a> in its repo `README`. Note that if you make changes to the Compute code, you'll need to run a separate deploy command to deploy your changes to Fastly as the **ğŸš€ Publish** button will only deploy once, after that it'll just update your content.

ğŸ›Ÿ Get help on the <a href="https://community.fastly.com" target="_blank">community forum</a>.

<img src="https://github.com/user-attachments/assets/17a8af4a-100f-416d-a1cf-f84174262138" width="100px"/>
